//
// Bloc.cpp for  in /home/fleuro_m//work/tmp
//
// Made by matthieu fleurot
// Login   <fleuro_m@epitech.net>
//
// Started on  Fri Jun  1 16:01:25 2012 matthieu fleurot
// Last update Sun Jun  3 17:48:36 2012 quentin pidoux
//

#include "../inc/Bloc.hh"

void	Bloc::ABloc::update(gdl::GameClock const & clock, gdl::Input &input)
{
  (void) clock;
  (void) input;
}

void	Bloc::ABloc::draw_object(Vector3f *position)
{
  gdl::Model::Begin();

  //this->_mymodel.play("Take 001");
  glPushMatrix();
  glTranslatef(position->x + 0.50, 0.0f, position->y - 0.50);
  glRotatef(0.0f, 0.0f, 0.0f, 0.0f);
  this->_mymodel.draw();
  glPopMatrix();

  gdl::Model::End();
}

// --------------------------Wall------------------------

Bloc::Wall::Wall(map::map &my_map) : _map(my_map)
{}

Bloc::Wall::~Wall()
{}

void	Bloc::Wall::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/wall.FBX");
  this->texture_ = gdl::Image::load("./asserts/Wall.png");
}

void	Bloc::Wall::draw()
{
  int		x;
  int		y;
  Vector3f	vec;

  for (y = 0; y < this->_map.getWidth(); y++)
    {
      for(x = 0; x < this->_map.getLength(); x++)
	{
	  if (this->_map.getPos(x, y) == 3)
	    {
	      vec.setX(y);
	      vec.setY(x);
	      vec.setZ(0);
	      this->draw_object(&vec);
	    }
	}
    }
}

// void Bloc::Wall::draw_object(Vector3f *position)
// {
//   this->texture_.bind();
//   glEnable(GL_TEXTURE_2D);
//   glBegin(GL_QUADS);

//   glTexCoord2f(0.0f, 0.0f);
//   glVertex3f(position->x, 1, position->y + 1);
//   glTexCoord2f(1.0f, 0.0f);
//   glVertex3f(position->x, 0.0f, position->y + 1);
//   glTexCoord2f(1.0f, 1.0f);
//   glVertex3f(position->x + 1, 0.0f, position->y + 1);
//   glTexCoord2f(0.0f, 1.0f);
//   glVertex3f(position->x + 1, 1, position->y + 1);

//   glTexCoord2f(0.0f, 0.0f);
//   glVertex3f(position->x, 1, position->y + 1);
//   glTexCoord2f(1.0f, 0.0f);
//   glVertex3f(position->x, 0.0f, position->y + 1);
//   glTexCoord2f(1.0f, 1.0f);
//   glVertex3f(position->x, 0.0f, position->y);
//   glTexCoord2f(0.0f, 1.0f);
//   glVertex3f(position->x, 1, position->y);

//   glTexCoord2f(0.0f, 0.0f);
//   glVertex3f(position->x + 1, 1, position->y);
//   glTexCoord2f(1.0f, 0.0f);
//   glVertex3f(position->x + 1, 0.0f, position->y);
//   glTexCoord2f(1.0f, 1.0f);
//   glVertex3f(position->x, 0.0f, position->y);
//   glTexCoord2f(0.0f, 1.0f);
//   glVertex3f(position->x, 1, position->y);

//   glTexCoord2f(0.0f, 0.0f);
//   glVertex3f(position->x + 1, 1, position->y + 1);
//   glTexCoord2f(1.0f, 0.0f);
//   glVertex3f(position->x + 1, 0.0f, position->y + 1);
//   glTexCoord2f(1.0f, 1.0f);
//   glVertex3f(position->x + 1, 0.0f, position->y);
//   glTexCoord2f(0.0f, 1.0f);
//   glVertex3f(position->x + 1, 1, position->y);

//   glTexCoord2f(0.0f, 0.0f);
//   glVertex3f(position->x + 1, 1, position->y + 1);
//   glTexCoord2f(1.0f, 0.0f);
//   glVertex3f(position->x, 1, position->y + 1);
//   glTexCoord2f(1.0f, 1.0f);
//   glVertex3f(position->x, 1, position->y);
//   glTexCoord2f(0.0f, 1.0f);
//   glVertex3f(position->x + 1, 1, position->y);

//   glEnd();

// }

// --------------------------BOX------------------------

Bloc::Box::Box(map::map &my_map) : _map(my_map)
{}

Bloc::Box::~Box()
{}

void	Bloc::Box::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/box.FBX");
}

void	Bloc::Box::draw()
{
  int		x;
  int		y;
  Vector3f	vec;

  for (y = 0; y < this->_map.getWidth(); y++)
    {
      for(x = 0; x < this->_map.getLength(); x++)
	{
	  if (this->_map.getPos(x, y) == 2)
	    {
	      vec.setX(y);
	      vec.setY(x);
	      vec.setZ(0);
	      this->draw_object(&vec);
	    }
	}
    }
}

// --------------------------Blank------------------------

Bloc::Blank::Blank(map::map &my_map) : _map(my_map)
{
  this->done = false;
}

Bloc::Blank::~Blank()
{}

void	Bloc::Blank::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/ground.FBX");
}

void	Bloc::Blank::draw()
{
  Vector3f	vec;

  vec.setX(0);
  vec.setY(0);
  vec.setZ(0);
  this->draw_object(&vec);
}

// --------------------------morebomb------------------------

Bloc::Morebomb::Morebomb(map::map &my_map) : _map(my_map)
{}

Bloc::Morebomb::~Morebomb()
{}

void	Bloc::Morebomb::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/bonus_bomb_up.FBX");
}

void	Bloc::Morebomb::draw()
{
  int		x;
  int		y;
  Vector3f	vec;

  for (y = 0; y < this->_map.getWidth(); y++)
    {
      for(x = 0; x < this->_map.getLength(); x++)
	{
	  if (this->_map.getPos(x, y) == 9)
	    {
	      vec.setX(y);
	      vec.setY(x);
	      vec.setZ(0);
	      this->draw_object(&vec);
	    }
	}
    }
}

// --------------------------lessbomb------------------------

Bloc::Lessbomb::Lessbomb(map::map &my_map) : _map(my_map)
{}

Bloc::Lessbomb::~Lessbomb()
{}

void	Bloc::Lessbomb::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/bonus_bomb_down.FBX");
}

void	Bloc::Lessbomb::draw()
{
  int		x;
  int		y;
  Vector3f	vec;

  for (y = 0; y < this->_map.getWidth(); y++)
    {
      for(x = 0; x < this->_map.getLength(); x++)
	{
	  if (this->_map.getPos(x, y) == 9)
	    {
	      vec.setX(y);
	      vec.setY(x);
	      vec.setZ(0);
	      this->draw_object(&vec);
	    }
	}
    }
}

// --------------------------morepower------------------------

Bloc::Morepower::Morepower(map::map &my_map) : _map(my_map)
{}

Bloc::Morepower::~Morepower()
{}

void	Bloc::Morepower::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/bonus_fire_up.FBX");
}

void	Bloc::Morepower::draw()
{
  int		x;
  int		y;
  Vector3f	vec;

  for (y = 0; y < this->_map.getWidth(); y++)
    {
      for(x = 0; x < this->_map.getLength(); x++)
	{
	  if (this->_map.getPos(x, y) == 9)
	    {
	      vec.setX(y);
	      vec.setY(x);
	      vec.setZ(0);
	      this->draw_object(&vec);
	    }
	}
    }
}

// --------------------------Lesspower------------------------

Bloc::Lesspower::Lesspower(map::map &my_map) : _map(my_map)
{}

Bloc::Lesspower::~Lesspower()
{}

void	Bloc::Lesspower::initialize()
{
  this->_mymodel = gdl::Model::load("./asserts/bonus_fire_down.FBX");
}

void	Bloc::Lesspower::draw()
{
  int		x;
  int		y;
  Vector3f	vec;

  for (y = 0; y < this->_map.getWidth(); y++)
    {
      for(x = 0; x < this->_map.getLength(); x++)
	{
	  if (this->_map.getPos(x, y) == 9)
	    {
	      vec.setX(y);
	      vec.setY(x);
	      vec.setZ(0);
	      this->draw_object(&vec);
	    }
	}
    }
}
